Full documentation: http://docs.openstack.org/developer/diskimage-builder/

DIB_YUM_REPO_CONF is used to add an extra repository that will be used during the build of the image.

CentOS7:

export DIB_YUM_REPO_CONF=/etc/yum.repos.d/rhel-7.3.repo
ramdisk-image-create --ramdisk-element dracut-ramdisk -o ironic-agent centos7

RHEL7:

export DIB_YUM_REPO_CONF=/etc/yum.repos.d/rhel-7.3.repo
export DIB_LOCAL_IMAGE=rhel-guest-image-7.2-20160302.0.x86_64.qcow2
ramdisk-image-create --ramdisk-element dracut-ramdisk -o ironic-agent rhel7

RHEL7 + Proliant Tools:
Apply patch: https://bugs.launchpad.net/diskimage-builder/+bug/1590176

export DIB_YUM_REPO_CONF=/etc/yum.repos.d/rhel-7.3.repo
export DIB_LOCAL_IMAGE=rhel-guest-image-7.2-20160302.0.x86_64.qcow2
export DIB_HPSSACLI_URL=http://whp-hou4.cold.extweb.hp.com/pub/softlib2/software1/pubsw-linux/p215599048/v83802/hpssacli-1.50-4.0.x86_64.rpm
ramdisk-image-create --ramdisk-element dracut-ramdisk -o ironic-agent proliant-tools rhel7
